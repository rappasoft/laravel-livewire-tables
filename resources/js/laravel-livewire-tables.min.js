document.addEventListener('alpine:init',()=>{Alpine.data('laravellivewiretable',(wire,showBulkActionsAlpine,tableID,primaryKeyName)=>({listeners:[],childElementOpen:!1,filtersOpen:wire.entangle('filterSlideDownDefaultVisible'),paginationCurrentCount:wire.entangle('paginationCurrentCount'),paginationTotalItemCount:wire.entangle('paginationTotalItemCount'),paginationCurrentItems:wire.entangle('paginationCurrentItems'),selectedItems:wire.entangle('selected'),selectAllStatus:wire.entangle('selectAll'),delaySelectAll:wire.entangle('delaySelectAll'),hideBulkActionsWhenEmpty:wire.entangle('hideBulkActionsWhenEmpty'),dragging:!1,reorderEnabled:!1,sourceID:'',targetID:'',evenRowClasses:'',oddRowClasses:'',currentlyHighlightedElement:'',evenRowClassArray:{},oddRowClassArray:{},evenNotInOdd:{},oddNotInEven:{},orderedRows:[],defaultReorderColumn:wire.get('defaultReorderColumn'),reorderStatus:wire.entangle('reorderStatus'),currentlyReorderingStatus:wire.entangle('currentlyReorderingStatus'),hideReorderColumnUnlessReorderingStatus:wire.entangle('hideReorderColumnUnlessReorderingStatus'),reorderDisplayColumn:wire.entangle('reorderDisplayColumn'),dragStart(a){this.$nextTick(()=>this.setupEvenOddClasses());this.sourceID=a.target.id;a.dataTransfer.effectAllowed='move';a.dataTransfer.setData('text/plain',a.target.id);a.target.classList.add('laravel-livewire-tables-dragging')},dragOverEvent(A){typeof this.currentlyHighlightedElement=='object'&&this.currentlyHighlightedElement.classList.remove('laravel-livewire-tables-highlight-bottom','laravel-livewire-tables-highlight-top');let b=A.target.closest('tr');this.currentlyHighlightedElement=b;A.offsetY<(b.getBoundingClientRect().height/2)?(b.classList.add('laravel-livewire-tables-highlight-top'),b.classList.remove('laravel-livewire-tables-highlight-bottom')):(b.classList.remove('laravel-livewire-tables-highlight-top'),b.classList.add('laravel-livewire-tables-highlight-bottom'))},dragLeaveEvent(_){_.target.closest('tr').classList.remove('laravel-livewire-tables-highlight-bottom','laravel-livewire-tables-highlight-top')},dropEvent(B){typeof this.currentlyHighlightedElement=='object'&&this.currentlyHighlightedElement.classList.remove('laravel-livewire-tables-highlight-bottom','laravel-livewire-tables-highlight-top');let c=B.target.closest('tr');let C=B.target.closest('tr').parentNode;let d=document.getElementById(this.sourceID).closest('tr');d.classList.remove('laravel-livewire-table-dragging');let e=d.rowIndex;let f=c.rowIndex;let g=document.getElementById(tableID);B.offsetY>(c.getBoundingClientRect().height/2)?C.insertBefore(d,c.nextSibling):C.insertBefore(d,c);f<e;let h='even';for(let i=1,_b;_b=g.rows[i];i++)if(!_b.classList.contains('hidden')&&!_b.classList.contains('md:hidden'))h==='even'?(_b.classList.remove(...this.oddNotInEven),_b.classList.add(...this.evenNotInOdd),h='odd'):(_b.classList.remove(...this.evenNotInOdd),_b.classList.add(...this.oddNotInEven),h='even')},reorderToggle(){if(this.currentlyReorderingStatus)wire.disableReordering();else{this.hideReorderColumnUnlessReorderingStatus&&(this.reorderDisplayColumn=!0);this.setupEvenOddClasses();wire.enableReordering()}this.$nextTick(()=>this.setupEvenOddClasses())},cancelReorder(){this.hideReorderColumnUnlessReorderingStatus&&(this.reorderDisplayColumn=!1);wire.disableReordering()},updateOrderedItems(){let _a=document.getElementById(tableID);let D=[];for(let i=1,_B;_B=_a.rows[i];i++)D.push({[primaryKeyName]:_B.getAttribute('rowpk'),[this.defaultReorderColumn]:i});wire.storeReorder(D)},setupEvenOddClasses(){if(this.evenNotInOdd.length===void 0||this.evenNotInOdd.length==0||this.oddNotInEven.length===void 0||this.oddNotInEven.length==0){let _A=document.getElementById(tableID).getElementsByTagName('tbody')[0];let E=[];let _c=[];(_A.rows[0]!==void 0&&_A.rows[1]!==void 0)&&(E=[..._A.rows[0].classList],_c=[..._A.rows[1].classList],this.evenNotInOdd=E.filter(aA=>!_c.includes(aA)),this.oddNotInEven=_c.filter(aB=>!E.includes(aB)),E=[],_c=[])}},toggleSelectAll(){if(!showBulkActionsAlpine)return;if(this.paginationTotalItemCount===this.selectedItems.length){this.clearSelected();this.selectAllStatus=!1}else this.delaySelectAll?this.setAllItemsSelected():this.setAllSelected()},setAllItemsSelected(){if(!showBulkActionsAlpine)return;this.selectAllStatus=!0;this.selectAllOnPage()},setAllSelected(){if(!showBulkActionsAlpine)return;this.delaySelectAll?(this.selectAllStatus=!0,this.selectAllOnPage()):(wire.setAllSelected())},clearSelected(){if(!showBulkActionsAlpine)return;this.selectAllStatus=!1;wire.clearSelected()},selectAllOnPage(){if(!showBulkActionsAlpine)return;let aC=this.selectedItems;var aD=this.paginationCurrentItems.values();for(const aE of aD)aC.push(`${aE}`);this.selectedItems=[...new Set(aC)]},destroy(){for(const aF of this.listeners)aF()}}));Alpine.data('booleanFilter',(aG,aH,_C,_d)=>({switchOn:!1,value:aG.entangle(`filterComponents.${aH}`).live,init(){this.switchOn=!1;this.value!==void 0&&(this.switchOn=!!+this.value);this.listeners.push(Livewire.on('filter-was-set',aI=>{(aI.tableName==_C&&aI.filterKey==aH)&&(this.switchOn=aI.value??_d)}))}}));Alpine.data('numberRangeFilter',(aJ,aK,aL,_D,_e)=>({allFilters:aJ.entangle('filterComponents',!1),originalMin:0,originalMax:100,filterMin:0,filterMax:100,currentMin:0,currentMax:100,hasUpdate:!1,wireValues:aJ.entangle(`filterComponents.${aK}`,!1),defaultMin:_D['minRange'],defaultMax:_D['maxRange'],restrictUpdates:!1,initialiseStyles(){let aM=document.getElementById(aL);aM.style.setProperty('--value-a',this.wireValues['min']??this.filterMin);aM.style.setProperty('--text-value-a',JSON.stringify(this.wireValues['min']??this.filterMin));aM.style.setProperty('--value-b',this.wireValues['max']??this.filterMax);aM.style.setProperty('--text-value-b',JSON.stringify(this.wireValues['max']??this.filterMax))},updateStyles(aN,aO){let aP=document.getElementById(aL);aP.style.setProperty('--value-a',aN);aP.style.setProperty('--text-value-a',JSON.stringify(aN));aP.style.setProperty('--value-b',aO);aP.style.setProperty('--text-value-b',JSON.stringify(aO))},setupWire(){this.wireValues!==void 0?(this.filterMin=this.originalMin=(this.wireValues['min']!==void 0)?this.wireValues['min']:this.defaultMin,this.filterMax=this.originalMax=(this.wireValues['max']!==void 0)?this.wireValues['max']:this.defaultMax):(this.filterMin=this.originalMin=this.defaultMin,this.filterMax=this.originalMax=this.defaultMax);this.updateStyles(this.filterMin,this.filterMax)},allowUpdates(){this.updateWire()},updateWire(){let aQ=parseInt(this.filterMin);let aR=parseInt(this.filterMax);if(aQ!=this.originalMin||aR!=this.originalMax){aR<aQ&&(this.filterMin=aR,this.filterMax=aQ);this.hasUpdate=!0;this.originalMin=aQ;this.originalMax=aR}this.updateStyles(this.filterMin,this.filterMax)},updateWireable(){this.hasUpdate&&(this.hasUpdate=!1,this.wireValues={'min':this.filterMin,'max':this.filterMax},aJ.set(`filterComponents.${aK}`,this.wireValues))},init(){this.initialiseStyles();this.setupWire();this.$watch('allFilters',value=>this.setupWire())}}));Alpine.data('flatpickrFilter',(aS,aT,aU,aV,_E)=>({wireValues:aS.entangle(`filterComponents.${aT}`),flatpickrInstance:flatpickr(aV,{mode:'range',altFormat:aU['altFormat']??'F j, Y',altInput:aU['altInput']??!1,allowInput:aU['allowInput']??!1,allowInvalidPreload:!0,ariaDateFormat:aU['ariaDateFormat']??'F j, Y',clickOpens:!0,dateFormat:aU['dateFormat']??'Y-m-d',defaultDate:aU['defaultDate']??null,defaultHour:aU['defaultHour']??12,defaultMinute:aU['defaultMinute']??0,enableTime:aU['enableTime']??!1,enableSeconds:aU['enableSeconds']??!1,hourIncrement:aU['hourIncrement']??1,locale:aU['locale']??'en',minDate:aU['earliestDate']??null,maxDate:aU['latestDate']??null,minuteIncrement:aU['minuteIncrement']??5,shorthandCurrentMonth:aU['shorthandCurrentMonth']??!1,time_24hr:aU['time_24hr']??!1,weekNumbers:aU['weekNumbers']??!1,onOpen:function(){window.childElementOpen=!0},onChange:function(aW,aX,aY){if(aW.length>1){var aZ=aX.split(' ')[0],bA=aX.split(' ')[2],F={};window.childElementOpen=window.filterPopoverOpen=!1;F={'minDate':aZ,'maxDate':bA};aS.set(`filterComponents.${aT}`,F)}}}),setupWire(){if(this.wireValues!==void 0)if(this.wireValues.minDate!==void 0&&this.wireValues.maxDate!==void 0){this.flatpickrInstance.setDate([this.wireValues.minDate,this.wireValues.maxDate])}else this.flatpickrInstance.setDate([]);else this.flatpickrInstance.setDate([])},init(){this.setupWire();this.$watch('wireValues',value=>this.setupWire())}}));Alpine.data('tableWrapper',(wire,showBulkActionsAlpine)=>({listeners:[],childElementOpen:!1,filtersOpen:wire.entangle('filterSlideDownDefaultVisible'),paginationCurrentCount:wire.entangle('paginationCurrentCount'),paginationTotalItemCount:wire.entangle('paginationTotalItemCount'),paginationCurrentItems:wire.entangle('paginationCurrentItems'),selectedItems:wire.entangle('selected'),selectAllStatus:wire.entangle('selectAll'),delaySelectAll:wire.entangle('delaySelectAll'),hideBulkActionsWhenEmpty:wire.entangle('hideBulkActionsWhenEmpty'),toggleSelectAll(){if(!showBulkActionsAlpine)return;if(this.paginationTotalItemCount===this.selectedItems.length){this.clearSelected();this.selectAllStatus=!1}else this.delaySelectAll?this.setAllItemsSelected():this.setAllSelected()},setAllItemsSelected(){if(!showBulkActionsAlpine)return;this.selectAllStatus=!0;this.selectAllOnPage()},setAllSelected(){if(!showBulkActionsAlpine)return;this.delaySelectAll?(this.selectAllStatus=!0,this.selectAllOnPage()):(wire.setAllSelected())},clearSelected(){if(!showBulkActionsAlpine)return;this.selectAllStatus=!1;wire.clearSelected()},selectAllOnPage(){if(!showBulkActionsAlpine)return;let bB=this.selectedItems;var bC=this.paginationCurrentItems.values();for(const bD of bC)bB.push(`${bD}`);this.selectedItems=[...new Set(bB)]},destroy(){for(const bE of this.listeners)bE()}}));Alpine.data('reorderFunction',(wire,tableID,primaryKeyName)=>({dragging:!1,reorderEnabled:!1,sourceID:'',targetID:'',evenRowClasses:'',oddRowClasses:'',currentlyHighlightedElement:'',evenRowClassArray:{},oddRowClassArray:{},evenNotInOdd:{},oddNotInEven:{},orderedRows:[],defaultReorderColumn:wire.get('defaultReorderColumn'),reorderStatus:wire.get('reorderStatus'),currentlyReorderingStatus:wire.entangle('currentlyReorderingStatus'),hideReorderColumnUnlessReorderingStatus:wire.entangle('hideReorderColumnUnlessReorderingStatus'),reorderDisplayColumn:wire.entangle('reorderDisplayColumn'),dragStart(bF){this.$nextTick(()=>this.setupEvenOddClasses());this.sourceID=bF.target.id;bF.dataTransfer.effectAllowed='move';bF.dataTransfer.setData('text/plain',bF.target.id);bF.target.classList.add('laravel-livewire-tables-dragging')},dragOverEvent(bG){typeof this.currentlyHighlightedElement=='object'&&this.currentlyHighlightedElement.classList.remove('laravel-livewire-tables-highlight-bottom','laravel-livewire-tables-highlight-top');let bH=bG.target.closest('tr');this.currentlyHighlightedElement=bH;bG.offsetY<(bH.getBoundingClientRect().height/2)?(bH.classList.add('laravel-livewire-tables-highlight-top'),bH.classList.remove('laravel-livewire-tables-highlight-bottom')):(bH.classList.remove('laravel-livewire-tables-highlight-top'),bH.classList.add('laravel-livewire-tables-highlight-bottom'))},dragLeaveEvent(bI){bI.target.closest('tr').classList.remove('laravel-livewire-tables-highlight-bottom','laravel-livewire-tables-highlight-top')},dropEvent(bJ){typeof this.currentlyHighlightedElement=='object'&&this.currentlyHighlightedElement.classList.remove('laravel-livewire-tables-highlight-bottom','laravel-livewire-tables-highlight-top');let bK=bJ.target.closest('tr');let bL=bJ.target.closest('tr').parentNode;let bM=document.getElementById(this.sourceID).closest('tr');bM.classList.remove('laravel-livewire-table-dragging');let bN=bM.rowIndex;let _f=bK.rowIndex;let G=document.getElementById(tableID);bJ.offsetY>(bK.getBoundingClientRect().height/2)?bL.insertBefore(bM,bK.nextSibling):bL.insertBefore(bM,bK);_f<bN;let H='even';for(let i=1,bO;bO=G.rows[i];i++)if(!bO.classList.contains('hidden')&&!bO.classList.contains('md:hidden'))H==='even'?(bO.classList.remove(...this.oddNotInEven),bO.classList.add(...this.evenNotInOdd),H='odd'):(bO.classList.remove(...this.evenNotInOdd),bO.classList.add(...this.oddNotInEven),H='even')},reorderToggle(){this.$nextTick(()=>this.setupEvenOddClasses());if(this.currentlyReorderingStatus)wire.disableReordering();else{this.setupEvenOddClasses();this.hideReorderColumnUnlessReorderingStatus&&(this.reorderDisplayColumn=!0);wire.enableReordering()}},cancelReorder(){this.hideReorderColumnUnlessReorderingStatus&&(this.reorderDisplayColumn=!1);wire.disableReordering()},updateOrderedItems(){let bP=document.getElementById(tableID);let bQ=[];for(let i=1,bR;bR=bP.rows[i];i++)bQ.push({[primaryKeyName]:bR.getAttribute('rowpk'),[this.defaultReorderColumn]:i});wire.storeReorder(bQ)},setupEvenOddClasses(){if(this.evenNotInOdd.length===void 0||this.evenNotInOdd.length==0||this.oddNotInEven.length===void 0||this.oddNotInEven.length==0){let bS=document.getElementById(tableID).getElementsByTagName('tbody')[0];let bT=[];let bU=[];(bS.rows[0]!==void 0&&bS.rows[1]!==void 0)&&(bT=[...bS.rows[0].classList],bU=[...bS.rows[1].classList],this.evenNotInOdd=bT.filter(bV=>!bU.includes(bV)),this.oddNotInEven=bU.filter(bW=>!bT.includes(bW)),bT=[],bU=[])}},init(){}}))});
